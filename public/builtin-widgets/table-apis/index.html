<html>

<head>
<<<<<<< Updated upstream
    <script src="/js/tailwind.min.js"></script>
    <link rel="stylesheet" href="/css/font-awesome-5.15.3.css" />
    <script defer src="/js/syncer.js"></script>
=======
    <script defer src="../syncer.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            background-color: white;
            height: 100%;
            width: 100%;
            overflow: auto;
            color: #1f2937;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        .table-auto {
            width: 100%;
            border-collapse: collapse;
        }
        .px-4 {
            padding-left: 16px;
            padding-right: 16px;
        }
        .py-2 {
            padding-top: 8px;
            padding-bottom: 8px;
        }
        .font-semibold {
            font-weight: 600;
        }
        .whitespace-nowrap {
            white-space: nowrap;
        }
        .bg-gray-100 {
            background-color: #f3f4f6;
        }
    </style>
>>>>>>> Stashed changes
</head>

<body>

    <table id="api-table" class="table-auto">
        <tbody>
            <!-- Dynamic content will be inserted here -->
        </tbody>
    </table>

    <script>
        let interval = null;

        function createTableCell(content, isBold = false) {
            const cell = document.createElement('td');
            cell.className = 'px-4 py-2 whitespace-nowrap';
            if (isBold) cell.className += ' font-semibold';
            cell.innerText = content;
            return cell;
        }

        function onWidgetLoaded(options) {
            const apiTableBody = document.querySelector('#api-table tbody');

            if (options.apis && Array.isArray(options.apis)) {
                options.apis.forEach((api, index) => {
                    const row = document.createElement('tr');
                    if (index % 2 === 1) row.className = 'bg-gray-100';
                    row.appendChild(createTableCell(api));
                    row.appendChild(createTableCell('0', true));
                    apiTableBody.appendChild(row);
                });

                interval = setInterval(() => {
                    options.apis.forEach((api, index) => {
                        let apiValueObject = getApiValue(api);
                        let apiValue = apiValueObject?.value || "0";
                        apiTableBody.rows[index].cells[1].innerText = apiValue;
                        apiTableBody.rows[index].cells[1].title = apiValue;
                    });
                }, 100);
            }
        }

        function onWidgetUnloaded(options) {
            if (interval) clearInterval(interval);
        }
    </script>
</body>

</html>